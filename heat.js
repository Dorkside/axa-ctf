/*
 * Filename: /Users/A966AK/Workspace/axa-se/heat.js
 * Path: /Users/A966AK/Workspace/axa-se
 * Created Date: Wednesday, November 18th 2020, 2:34:04 pm
 * Author: James MARTIN
 * 
 * Copyright (c) 2020 Your Company
 */

const terrain = [[4670, 6455, 5996, 3508, 9737, 9222, 7592, 5418, 8247, 1786, 5303,3178, 3620, 50, 7089, 7606, 4336, 8905, 1419, 1243, 7316, 4300,1367, 7806, 7614, 9793, 6457, 7609, 4934, 4141, 6520, 7876, 7495,5839, 3696, 6919, 4465, 963, 4781, 1058, 4316, 1285, 1292, 5629, 1073, 8769, 8440, 7274, 111, 2825],
[7610, 2690, 510, 8605, 9418, 4507, 6707, 3995, 9527, 435, 7515,6643, 3549, 7325, 1324, 2006, 7349, 7679, 9072, 4294, 6672, 8286, 2365, 5339, 3440, 2028, 3100, 4131, 1511, 3497, 2439, 264, 8081, 811, 2827, 3390, 9006, 5200, 1872, 2816, 7856, 9096, 4859, 7889,8461, 2317, 6576, 7259, 7336, 4812],
[5715, 1772, 7999, 632, 4330, 5725, 4267, 302, 1237, 7363, 9158,2363, 3489, 8135, 4192, 3934, 5402, 7384, 9451, 3646, 6588, 5451,6169, 6944, 5950, 5700, 2786, 521, 9146, 1664, 6987, 8328, 9623, 940, 1496, 9325, 1465, 8643, 3482, 6219, 8876, 3639, 9240, 5097, 1410, 2529, 7395, 7069, 7855, 4972],
[2281, 2496, 697, 623, 4798, 1076, 5985, 2670, 7674, 1301, 1219, 9244, 5014, 883, 5060, 867, 8986, 5681, 1141, 4153, 4778, 4004, 3052, 546, 7650, 7528, 7440, 6479, 240, 3266, 5563, 1879, 3287, 3487, 9646, 4683, 2568, 6335, 131, 6353, 2863, 9007, 5409, 8704, 1752, 401, 6510, 1832, 2449, 2559],
[8609, 6654, 4110, 4397, 866, 2363, 7756, 7664, 8408, 4739, 5714, 2083, 841, 4628, 3232, 7665, 6630, 3794, 8927, 2927, 1003, 3814, 5948, 248, 9660, 9665, 5157, 875, 269, 873, 8604, 5512, 6439, 3367, 1275, 6674, 3121, 8921, 2535, 6489, 3878, 9922, 9046, 6184, 5920, 7599, 5625, 9281, 4694, 6300],
[1570, 293, 7028, 8229, 7062, 8464, 5324, 8298, 4242, 4291, 358, 937, 1084, 20, 3544, 1588, 4732, 8014, 1757, 4607, 749, 5099, 7140, 9294, 2792, 8896, 7823, 6595, 2480, 6843, 8409, 4541, 3710, 1487, 5332, 6080, 1132, 6035, 9793, 4444, 6862, 4080, 3033, 2353, 8272, 8695, 650, 3632, 2791, 6870],
[4246, 5916, 8439, 9991, 5356, 7895, 9743, 6604, 6864, 7771, 2761, 6048, 16, 6097, 2592, 9883, 7784, 3849, 1520, 8168, 3588, 742, 4581, 9940, 3632, 2880, 9559, 5598, 6342, 5087, 6180, 9937, 3041, 7244, 6872, 4688, 6266, 6281, 3590, 9352, 3276, 3278, 7214, 4198, 9213, 8887, 5128, 5895, 6702, 3583],
[6997, 2091, 6400, 3379, 2883, 7482, 5837, 2592, 7422, 8475, 8343, 3608, 3790, 1150, 6568, 9170, 6268, 6422, 4316, 4982, 8758, 990, 2489, 1571, 8075, 9445, 4394, 7410, 4959, 7677, 2495, 4843, 4982, 5471, 9235, 3938, 5860, 2510, 9701, 2618, 6886, 9716, 2273, 2519, 7496, 1538, 5299, 2466, 8863, 5833],
[9806, 8909, 1720, 5876, 7444, 3490, 8042, 9242, 4010, 1376, 443, 1507, 8243, 5046, 7996, 6145, 38, 2041, 6132, 1836, 6799, 4509, 5612, 4026, 3397, 2344, 590, 5774, 298, 8960, 2696, 3471, 8152, 6099, 258, 8601, 3536, 5315, 8233, 4300, 7124, 9937, 4669, 4373, 7944, 4384, 8036, 6949, 3160, 8541],
[8507, 6837, 8186, 4189, 3402, 293, 6577, 8880, 5308, 2490, 8840, 6300, 3029, 4380, 6888, 7769, 9555, 3406, 6361, 4020, 7124, 1023, 7748, 2674, 5283, 5328, 7253, 3974, 4917, 8336, 2006, 9243, 2555, 518, 1158, 1806, 4457, 3667, 8501, 7982, 4510, 2384, 960, 6396, 1245, 9386, 1222, 7165, 346, 4830]];

function getCapacity(heightMap) {
  return heightMap.map((height,index) => {
    const leftMax = heightMap.slice(0,index).reduce((max,h) => Math.max(max,h),0);
    const rightMax = heightMap.slice(index + 1).reduce((max,h) => Math.max(max,h),0);
    return Math.max(Math.min(leftMax,rightMax) - height, 0);
  })
}

const terrainCapacity = terrain
  .map(parcel => getCapacity(parcel))
  .map(capacity => capacity
  .reduce((total,cap) => total + cap,0))

console.log(terrainCapacity);

console.log(
  terrainCapacity.reduce((answer, capacity, index) => {
    if(!answer || answer.index === undefined) {
      return {
        index,
        capacity
      }
    }
    if(capacity > answer.capacity) {
      return {
        index,
        capacity
      }
    }
  },{
    index: undefined,
    capacity: undefined
  })
)